/*
 * Copyright (c) 2019-present Sonatype, Inc.
 * This program and the accompanying materials are made available under
 * the terms of the Eclipse Public License 2.0 which accompanies this
 * distribution and is available at https://www.eclipse.org/legal/epl-2.0/.
 */
@use '../../scss-shared/nx-container-helpers';
@use '../../scss-shared/nx-text-helpers';

// the padding on the sides of each transfer list control box
$-control-box-side-spacing: var(--nx-spacing-6x);
$-item-vertical-padding: var(--nx-spacing-2x);
$-item-vertical-margin: var(--nx-spacing-2x);
$-visible-item-count: 10;

.nx-transfer-list__half {
  margin-bottom: 0;
  width: 348px;
  min-width: 348px;

  .nx-legend__text::after {
    // remove "Optional"
    display: none;
  }
}

.nx-transfer-list__half-header {
  font-size: var(--nx-font-size);
  font-weight: bold;
  margin: 0 0 var(--nx-spacing-2x) 0;
}

.nx-transfer-list__control-box {
  align-items: stretch;
  border: var(--nx-border-default);
  border-radius: var(--nx-border-radius);
  display: flex;
  flex-direction: column;
}

.nx-transfer-list__filter {
  margin: var(--nx-spacing-6x) $-control-box-side-spacing 0 $-control-box-side-spacing;
  width: auto;
}

.nx-transfer-list__move-all {
  @include nx-container-helpers.container-horizontal;

  align-self: start;
  background: initial;
  border: initial;
  color: var(--nx-color-link);
  cursor: pointer;
  font: inherit;
  margin: var(--nx-spacing-4x) $-control-box-side-spacing 0 $-control-box-side-spacing;
  padding: 0;

  &:hover {
    color: var(--nx-color-link-hover);
  }

  &:active {
    color: var(--nx-color-link-active);
  }

  + .nx-transfer-list__item-list {
    margin-top: var(--nx-spacing-4x);
  }
}

.nx-transfer-list__item-list {
  $item-height: '(1em * var(--nx-line-height) + 2 * #{$-item-vertical-padding})';

  @include nx-container-helpers.container-vertical;

  background-color: var(--nx-swatch-indigo-97);
  border-top: var(--nx-border-default);
  border-bottom: var(--nx-border-default);

  box-sizing: content-box;

  // Should be exactly tall enough to show 10 items, taking into account the margin between them
  height: calc(
    #{$-visible-item-count} * #{$item-height} +
    #{$-visible-item-count - 1} * #{$-item-vertical-margin}
  );


  overflow-y: auto;
  padding: var(--nx-spacing-6x) $-control-box-side-spacing;
  margin-top: var(--nx-spacing-6x);
}

.nx-transfer-list__item {
  @include nx-container-helpers.container-horizontal;
  @include nx-text-helpers.truncate-ellipsis;

  background-color: var(--nx-swatch-white);
  border: var(--nx-border-default);
  border-radius: var(--nx-border-radius);
  cursor: pointer;
  display: block;
  margin: var(--nx-spacing-2x) 0;
  padding: var(--nx-spacing-2x);

  &:focus-within {
    border-color: var(--nx-color-interactive-border-focus);
    box-shadow: var(--nx-box-shadow-focus);
  }

  &:hover {
    border-color: var(--nx-color-form-element-border);
  }

  &:active {
    background-color: transparent;
    border-color: var(--nx-color-form-element-border);
  }
}

.nx-transfer-list__checkbox {
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  margin: 0;
}

.nx-transfer-list__footer {
  font-size: var(--nx-font-size-s);
  padding: var(--nx-spacing-base) $-control-box-side-spacing;
}
